function [y1] = denoisenet1_10_400_bay(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 31-Aug-2018 17:31:33.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx60 matrix, input #1
% and returns:
%   y = Qx60 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [1.49604642391205;1.45682656764984;1.42134380340576;1.38954246044159;1.36070370674133;1.3341418504715;1.30980145931244;1.28816473484039;1.26805794239044;1.24951934814453;1.23227560520172;1.21663463115692;1.20206487178802;1.18893694877625;1.1761337518692;1.16489553451538;1.15425086021423;1.14471459388733;1.13539016246796;1.12691020965576;1.11904239654541;1.11174011230469;1.10459816455841;1.0979768037796;1.09247136116028;1.08655798435211;1.08136916160583;1.07643842697144;1.07195830345154;1.06786453723907;1.06391036510468;1.05965709686279;1.05610525608063;1.05316114425659;1.05010104179382;1.04725873470306;1.04441916942596;1.041539311409;1.03958475589752;1.03735327720642;1.03519511222839;1.03240776062012;1.03129696846008;1.02927541732788;1.0276552438736;1.02608394622803;1.02488565444946;1.02293467521667;1.0219144821167;1.02057075500488;1.01937866210938;1.0182284116745;1.01721930503845;1.01601433753967;1.01535129547119;1.01441383361816;1.013671875;1.01252484321594;1.01218783855438;1.01142191886902];
x1_step1.gain = [254.400679323103;222.038327157226;185.76333942313;181.077753313474;174.835514797832;170.505360935801;160.472276157591;165.853238035924;169.643325884506;164.032225263981;158.592808258025;166.673779791176;169.413779523584;174.455552204972;166.929167703099;177.907553312196;170.228558093286;186.479815045349;191.507613633769;189.248025989261;190.741217399213;190.526772431493;190.340877891608;195.945154282778;211.828186156915;204.795000122067;206.906445009003;212.450500189946;214.26840357599;223.535267940416;222.654191716102;211.462408147317;207.282224885408;211.625116678019;229.432013675214;228.525723625962;237.489609874866;232.197746837545;236.432018038331;248.724534120054;242.873505312835;222.515398286427;260.341945595332;235.717822269055;244.181405367643;254.107839573488;251.438231547396;228.578653369302;260.998055412953;259.456195969875;263.097729268599;266.949083503055;261.657480621969;259.416077806813;274.469391093806;270.412713763035;271.616629970211;268.285216278884;286.442369090506;281.851591768165];
x1_step1.ymin = -1;

% Layer 1
b1 = -0.0011037019509944243859;
IW1_1 = [0.0014745797371396758557 -0.011909614936182703199 -0.026404925100087160011 -0.033228091392592917774 -0.037781212248466214398 -0.042238727374572945794 -0.047673484947501454378 -0.046096926639399529724 -0.048754663661477730396 -0.049035480534912814776 -0.053058072141600340355 -0.049934850204878034052 -0.0480129984912278443 -0.0479821404438163443 -0.049169171683777330994 -0.043551511460217809391 -0.049269326808769164927 -0.040492840806596819281 -0.039079089499330664503 -0.03836554776088213492 -0.036231966719524673348 -0.035530345878515216806 -0.035626739015116731801 -0.031787443140514154427 -0.031058594544604040816 -0.028690674709300464928 -0.029663966206727038211 -0.028608087680450779849 -0.029780332499642365313 -0.025135072023348109527 -0.026779478045062997393 -0.02492650563334149888 -0.027246100239129725229 -0.023677067405947833933 -0.020504701742221343591 -0.02362004522051523725 -0.017542705301199543189 -0.020988067632831414883 -0.020176460949424244312 -0.013507873653323947127 -0.015298876926900678921 -0.015475462121939578819 -0.012695944033453749125 -0.014862176258571422466 -0.016401910754072757809 -0.013378797638847752041 -0.010740281298952353284 -0.013582982165303401564 -0.013609016382716981192 -0.011214349913756409272 -0.011283901658913703808 -0.012183331606811662051 -0.007692693732075348706 -0.011716230528045653431 -0.0081259501258079246816 -0.0059498828230222199076 -0.0080145893541331662824 -0.0065655342575486313333 -0.0074860684194263601987 -0.0070446369345802742346];

% Layer 2
b2 = [0.1027336322346407288;0.087520672010510461303;0.075628784226702938653;0.066006503877540326219;0.05802573929613354109;0.051295379739494662008;0.045499390908217987595;0.040466904697554220705;0.036048132588088165063;0.032106013979277377157;0.028563412554601354254;0.025380271818887713969;0.022493392968195611431;0.01985136240538921959;0.017417930980542395414;0.015191730117631701766;0.013121589010500415984;0.011232271401136601635;0.0094425968549700489002;0.0077913297820894041393;0.0062333036565532951717;0.0047724371061052288032;0.0034296530672798990549;0.0021473087273786261968;0.0011447071082823191083;0.00052803986727148087207;0.00012101629051654598165;1.4341479753617871959e-05;7.713162490404000364e-05;0.00030259449417754263369;0.00069760964658689889918;0.00053571894990465181337;-0.0014966279771949930495;-0.0031974132319140180156;-0.0047137408584172956968;-0.0059476965142657902547;-0.007057583597265965937;-0.0079354940162804053772;-0.0086754609977574836943;-0.0092534237927064024593;-0.0097747492241045119687;-0.010156071164465530626;-0.010374930996301273342;-0.01065297501498784459;-0.01078023607023992532;-0.010801888480644136412;-0.01083904509292311219;-0.01077716434690903502;-0.010633141043777549761;-0.01053439899224740614;-0.010378365167885379716;-0.010146768179255952549;-0.009957686669092361692;-0.0096609382506604706692;-0.0094848079676955830003;-0.0092447717829020684133;-0.0091086685504628717852;-0.0089472138873785186236;-0.0089523449462986584568];
LW2_1 = [-0.90005055421432167417;-0.96579666226182647737;-1.0276663836174690925;-1.0863795230107999856;-1.1425053304701862089;-1.1958847118503925788;-1.2468680283008448662;-1.2953766671189828052;-1.3414418940630312704;-1.3853303091771449473;-1.4268664714327603527;-1.4663099788933218193;-1.5036944267325689228;-1.5391409564795466292;-1.5726146603867516838;-1.604288852241877894;-1.6341455127674182624;-1.6624425758325491742;-1.6891200256624201437;-1.7142968852153455117;-1.7380162390165847519;-1.7604908916299417676;-1.7816001308908568923;-1.8014080776957623886;-1.8197293518849322336;-1.836434097287157563;-1.8517630751126550326;-1.8657182007850043881;-1.8785444350239415279;-1.8901187841055175909;-1.9008021080737114161;-1.9093268575474082738;-1.9131036431606138759;-1.9164330865121446124;-1.919503605813926983;-1.9220173272926799335;-1.9243457157675243341;-1.9263097319773652139;-1.9279261838809087504;-1.9293833194391245556;-1.9305686146829228456;-1.9316676408347546179;-1.932403358902333057;-1.9331066225158202165;-1.9336599920735517699;-1.933919209038903908;-1.9341766862268969795;-1.9340229277744240832;-1.934152196424818948;-1.9336924864760958176;-1.9333655266510880733;-1.9325817425206202049;-1.9317864446033055081;-1.9311283553524865031;-1.9300144141786443885;-1.9291461457356549047;-1.927767393695720699;-1.9262182378747534361;-1.924406343528212382];

% Output 1
y1_step2.ymin = -1;
y1_step2.gain = [698.934177637061;432.279920641055;349.503489365248;313.019441023919;295.311131451102;287.197493880206;284.750521902952;286.012649380317;289.897119554887;295.764054649625;303.199045794629;311.954333314739;321.840357574479;332.736027924319;344.565032552217;357.266098807496;370.799982318879;385.151882460973;400.296239740408;416.225463927756;432.949240019612;450.479714308729;468.807555816358;487.965098016404;507.831098465357;528.416251968504;549.748214168687;571.840076348887;594.725841900035;618.469274154901;643.051590647758;668.122177531759;692.72950988893;718.264234951623;744.859527614988;772.467240664856;801.165942409627;831.007776511962;861.961364570489;894.164899003358;927.584231768674;962.327406217735;998.34668253496;1035.75848870231;1074.63592108634;1114.91334396598;1156.81003930221;1200.17283067458;1245.33966745843;1292.04589911436;1340.56859768278;1390.79963524828;1443.07724066747;1497.16366232376;1553.30210165725;1611.33461390703;1671.53691342034;1733.8999586606;1798.39382570479];
y1_step2.xoffset = [1.45983076095581;1.42408657073975;1.39197611808777;1.36294519901276;1.33657646179199;1.312539935112;1.29056644439697;1.27043080329895;1.25194156169891;1.2349339723587;1.21926438808441;1.20480704307556;1.191450715065;1.17909681797028;1.16765749454498;1.15705394744873;1.1472156047821;1.13807880878448;1.1295862197876;1.12168574333191;1.11433041095734;1.10747742652893;1.10108768939972;1.09512591362;1.08955872058868;1.08435642719269;1.07949244976044;1.07494187355042;1.07068228721619;1.06669294834137;1.06295454502106;1.05944967269897;1.05616199970245;1.05307638645172;1.05017936229706;1.04745781421661;1.0449001789093;1.04249536991119;1.04023325443268;1.03810453414917;1.03610050678253;1.03421306610107;1.03243458271027;1.03075838088989;1.02917778491974;1.02768671512604;1.02627980709076;1.02495157718658;1.02369737625122;1.02251255512238;1.02139294147491;1.02033448219299;1.01933372020721;1.0183869600296;1.01749122142792;1.01664328575134;1.01584053039551;1.01508021354675;1.01435995101929];
y1_step1.xrows = 60;
y1_step1.keep = [2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60];
y1_step1.remove = 1;
y1_step1.constants = 1.5;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step2);
y1 = removeconstantrows_reverse(y1,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end

% Remove Constants Output Reverse-Processing Function
function x = removeconstantrows_reverse(y,settings)
Q = size(y,2);
x = nan(settings.xrows,Q,'like',y);
x(settings.keep,:) = y;
x(settings.remove,:) = repmat(settings.constants,1,Q);
end
